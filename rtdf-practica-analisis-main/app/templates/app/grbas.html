{% extends 'app/base.html' %}
{% load static%}


{% block css%}

{% endblock %}
{% block contenido %}
<link type="text/css" rel="stylesheet" href="{% static 'app/css/preregistrados.css' %}">

<script src="{% static 'app/js/jquery-3.6.1.min.js' %}"></script>



<!-- CONTENIDO principal -->









<div style="width:100%; display:flex; justify-content:center; margin:5px;">

<main class="form-signin">

  {% if request.user.is_superuser %}
  {% else %}

    <div class="col-8">
      <h4>Pacientes</h4>

      <select id="pacientes" name="pacientes" class="form-control" style="width:100%;" required>
        <option value="null" disabled selected>Seleccione un paciente</option> <!---->
        {% for p in pacientes %}
        <option value="{{ p.id_prof_paci }}">{{ p.id_paciente }}</option>
        {% endfor %}
      </select>
    </div>
    
  <form id="mi-formulario" action="" method="post" style="margin-top:5rem;">
    {% csrf_token %}
    <div class="row">
      <div class="col-6">
        <label  for="{{ formulario.G.id }}" id="label-{{ formulario.G.id }}" onclick="document.getElementById('{{ formulario.G.id }}').click()">{{ formulario.G.label }}: </label>
        <select name="{{ formulario.G.name }}" id="id_G">
          <option value="" selected disabled>Seleccione valor:</option>
          {% for choice in formulario.G.field.choices %}
            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
          {% endfor %}
        </select>
        <div id="error-messageG"></div>
      </div>      
      <div class="col-6">
        <label  for="{{ formulario.R.id }}" id="label-{{ formulario.R.id }}" onclick="document.getElementById('{{ formulario.R.id }}').click()">{{ formulario.R.label }}:  </label>
        <select name="{{ formulario.R.name }}" id="id_R"> 
          <option value="" selected disabled>Seleccione valor:</option>
          {% for choice in formulario.R.field.choices %}
            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
          {% endfor %}
        </select>
        <div id="error-messageR"></div>
      </div>
    </div> 
    <div class="row">
      <div class="col-6">
        <label  for="{{ formulario.B.id }}" id="label-{{ formulario.B.id }}" onclick="document.getElementById('{{ formulario.B.id }}').click()">{{ formulario.B.label }}:  </label>
        <select name="{{ formulario.B.name }}" id="id_B">
          <option value="" selected disabled>Seleccione valor:</option>
          {% for choice in formulario.B.field.choices %}
          <option value="{{ choice.0 }}">{{ choice.1 }}</option>
          {% endfor %}
        </select>
        <div id="error-messageB"></div>
      </div>
      <div class="col-6">
        <label  for="{{ formulario.A.id }}" id="label-{{ formulario.A.id }}" onclick="document.getElementById('{{ formulario.A.id }}').click()">{{ formulario.A.label }}:  </label>
        <select name="{{ formulario.A.name }}" id="id_A">
          <option value="" selected disabled>Seleccione valor:</option>
          {% for choice in formulario.A.field.choices %}
            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
          {% endfor %}
        </select>
        <div id="error-messageA"></div>
      </div>
    </div>   
    <div class="row">
      <div class="col-6">
        <label  for="{{ formulario.S.id }}" id="label-{{ formulario.S.id }}" onclick="document.getElementById('{{ formulario.S.id }}').click()">{{ formulario.S.label }}:  </label>
        <select name="{{ formulario.S.name }}" id="id_S">
          <option value="" selected disabled>Seleccione valor:</option>
          {% for choice in formulario.S.field.choices %}
            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
          {% endfor %}
        </select>
        <div id="error-messageS"></div>
      </div> 
      <div class="col-6">
        {{ formulario.id_paciente }}
        {{ formulario.id_fonoaudilogo }}
        
      </div>
      
    </div>
    <div class="row">
      <div class="col-12">
        {{ formulario.Comentario.label_tag }}
        {{ formulario.Comentario }}
      </div>
    </div>
    {% endif%}

    {% if request.user.is_superuser %}

    {% else %}
    <div  class="centerbtn" style="  display: flex; justify-content: end; margin-top:5rem;">
      <button type="submit">REGISTRAR</button>
    </div>
  {% endif%}
  </form>



    <h4 style="margin-top:5rem;">Historico de GRBAS ingresados</h4>
    <table class="table" >
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Paciente</th>
            <th scope="col">G</th>
            <th scope="col">R</th>
            <th scope="col">B</th>
            <th scope="col">A</th>
            <th scope="col">S</th>
            <th scope="col">Comentario</th>
          </tr>
        </thead>
        <tbody>
             {% for i in form %}

          <tr id={{i.id}}>
            <th value={{i.id}}>{{i.id}}</th>
            <th value={{i.id_paciente}}>{{i.id_paciente}}</th>
            <td value={{i.G}}>{{i.G}}</td>
            <td value={{i.R}}>{{i.R}}</td>
            <td value={{i.B}}>{{i.B}}</td>
            <td value={{i.A}}>{{i.A}}</td>
            <td value={{i.S}}>{{i.S}}</td>
            <td value={{i.Comentario}}>{{i.Comentario}}</td>
          </tr>
{% endfor %}
        </tbody>
    </table>

  </main>
</div>


<script src="{% static 'app/js/grbas.js' %}"></script>




{% endblock %}





